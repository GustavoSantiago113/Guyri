<html>
    <head>
        <title>
            Guyri - Sprinkling
        </title>
        <link rel="icon" href="Icones/Logotipo 2.png">
        <link rel="stylesheet" type="text/css" href="style.css">
        <script src="functions.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    </head>
    <header class="header">
        <img class="logo_header" src="Icones/Logotipo 2.png">
        <div class="title_header">
            <h1 style="background-color: #b5e8c3; font-size: 30px;">ARA</h1>
            <h3 style="background-color: #b5e8c3; font-size: larger;">BIOSYSTEMS</h3>
        </div>
        <a class="return_initial" href="initial_page.html">Home</a>
    </header>
    <body>
    <div class="body_sizing">   
        <div class="main_lateral_dropdown">

            <div class="lateral_dropdown">
                <button class="lateral_dropbtn">
                    <img class="icon" src="Icones/irrigation.png">
                </button>
                <div class="lateral_dropdown-content">
                    <a class="link" href="Gotejamento.html">Dripping</a>
                    <a class="link" href="Aspersao.html">Sprinkling</a>
                    <a class="link" href="Micro_Aspersao.html">Micro-Sprinkling</a>
                    <a class="link" href="Pivo_Central.html">Center Pivot</a>
                </div>
            </div>

            <div class="lateral_dropdown">
                <button class="lateral_dropbtn">
                    <img class="icon" src="Icones/solar-energy.png">
                </button>
                <div class="lateral_dropdown-content">
                    <a class="link" href="Aquecimento_Solar.html">Solar Heating</a>
                    <a class="link" href="Fotovoltaica.html">Photovoltaic</a>
                    <a class="link" href="Eolica.html">Wind</a>
                    <a class="link" href="Hidroeletrica.html">Hydroelectric</a>
                </div>
            </div>

            <div class="lateral_dropdown">
                <button class="lateral_dropbtn">
                    <img class="icon" src="Icones/bacteria.png">
                </button>
                <div class="lateral_dropdown-content">
                    <a class="link" href="Biodigestor.html">Biodigester</a>
                    <a class="link" href="Compostagem.html">Composting</a>
                </div>
            </div>

            <div class="lateral_dropdown">
                <button class="lateral_dropbtn">
                    <img class="icon" src="Icones/greenhouse.png">
                </button>
                <div class="lateral_dropdown-content">
                    <a class="link" href="Ventilacao_Forcada.html">Forced Ventilation</a>
                    <a class="link" href="Ar_Condicionado.html">Air Conditioning</a>
                    <a class="link" href="Nebulizacao.html">Fogging</a>
                </div>
            </div>

            <div class="lateral_dropdown">
                <button class="lateral_dropbtn">
                    <img class="icon" src="Icones/dollar-currency-symbol.png">
                </button>
                <div class="lateral_dropdown-content">
                    <a class="link" href="Analise_Economica.html">Economic analysis</a>
                </div>
            </div>

        </div>
            
            <div class="main_section">

                <div class="calculator">

                    <ul class="nav">
                        <button class="nav_link active" id="cult_bt" onclick="openTab(event, 'cult')">Crop</button>
                        <button class="nav_link" id="sol_bt" onclick="openTab(event, 'sol')">Soil</button>
                        <button class="nav_link" id="area_bt" onclick="openTab(event, 'area')">Area</button>
                        <button class="nav_link" id="proj_bt" onclick="openTab(event, 'proj')">Project Criteria</button>
                        <button class="nav_link" id="asp_bt" onclick="openTab(event, 'asp')">Sprinkler</button>
                        <button class="nav_link" id="mdo_bt" onclick="openTab(event, 'mdo')">Labor</button>
                    </ul>

                    <div class="tab_content">

                        <div class="tab_pane" id="cult">
                            <input class="input"type="number" step="0.0001" id="ETO" placeholder="ETo (mm/day)">
                            <br><input class="input" placeholder="Kc"type="number" step="0.0001" id="KC">
                            <br><input class="input" placeholder="ETc (mm/day)"type="number" step="0.0001" id="ETC">
                            <br><input class="input" placeholder="Depth of the root system (cm)"type="number" step="0.0001" id="Z">
                            <br><input class="input" placeholder="f (%)"type="number" step="0.0001" id="f">
                        </div>

                        <div class="tab_pane" id="sol" style="display: none;">
                            <input class="input" placeholder="Field Capacity (cm3/cm3)"type="number" step="0.0001" id="CC">
                            <br><input class="input" placeholder="Permanent Wilting Point (cm3/cm3)"type="number" step="0.0001" id="PMP">
                        </div>

                        <div class="tab_pane" id="area" style="display: none;">
                            <input class="input" placeholder="Area width (m)"type="number" step="0.0001" id="LA">
                            <br><input class="input" placeholder="Area length(m)"type="number" step="0.0001" id="CA">
                            <br><input class="input" placeholder="Length from suction line to first lateral line (m)"type="number" step="0.0001" id="CLS">
                            <br><input class="input" placeholder="Suction height (m)"type="number" step="0.0001" id="AS">
                            <br><input class="input" placeholder="Positive settlement height for uphill and negative for downhill (m)"type="number" step="0.0001" id="AR">
                        </div>

                        <div class="tab_pane" id="proj" style="display: none;">
                            <input class="input" placeholder="Irrigation Efficiency (%)"type="number" step="0.0001" id="IR">
                            <br><input class="input" placeholder="Flow velocity in the main pipe and discharge (m/s)"type="number" step="0.0001" id="VE">
                            <br><input class="input" placeholder="Main line Hazen-Williams coefficient"type="number" step="0.0001" id="C1">
                            <br><input class="input" placeholder="Secondary line Hazen-Williams coefficient"type="number" step="0.0001" id="C2">
                            <h5 style="background-color: #65b8a6;">Secondary Line at:</h5>
                            <br>
                            <input type="radio" name="linhas" id="AcliveS"/><span>Uphill slope</span>
                            <input type="radio" name="linhas" id="DecliveS"/><span>Downhill slope</span>
                            <input type="radio" name="linhas" id="NivelS"/><span>Level</span>
                            <input class="input" style="width:fit-content;" placeholder="Height difference (m)"type="number" step="0.0001" id="Dec1">
                        </div>

                        <div class="tab_pane" id="asp" style="display: none;">
                            <input class="input" placeholder="Flow (m3/h)"type="number" step="0.0001" id="VZ">
                            <br><input class="input" placeholder="Service Pressure (mca)"type="number" step="0.0001" id="PS">
                            <br><input class="input" placeholder="Spacing between plants (m)"type="number" step="0.0001" id="E1">
                            <br><input class="input" placeholder="Line spacing (m)"type="number" step="0.0001" id="E2">
                            <br><input class="input" placeholder="Application intensity (mm/h)"type="number" step="0.0001" id="IA">
                            <br><input class="input" placeholder="Sprinkler height (m)"type="number" step="0.0001" id="AA">
                        </div>

                        <div class="tab_pane" id="mdo" style="display: none;">
                            <input class="input" placeholder="Pump Efficiency (%)"type="number" step="0.0001" id="RM">
                            <br><input class="input" placeholder="Daily service hours (h)"type="number" step="0.0001" id="Nh">
                            <br><h5 style="background-color: #65b8a6;">Will there be replacement sprinklers in the same area?</h5>
                            <br><span>Yes</span><input type="radio" name="ta" id="Sim"/><input placeholder="Time for exchange (h)" class="input" style="width:fit-content;"type="number" step="0.0001" id="Tm">
                            <br><span>No</span><input type="radio" name="ta" id="Nao"/>
                        </div>

                    </div>

                </div>

                <button class="result" onclick="DimensionarAspersao('minhaDiv');">
                    Size!
                </button>

                <div class="boxresults" id="minhaDiv" style="display: none;">
                    <center><div class="titresp">Results</div></center>
                    <h5 style="background-color: #65b8a6;">Management</h5>
                    <div class="respostas">Watering Shift (days): <span id="TR"></span></div>
                    <div class="respostas">Irrigation period (h): <span id="PI"></span></div>
                    <div class="respostas">Raw Irrigation lamina (mm): <span id="ITN"></span></div>
                    <div id="maodeobra" style="display:none;">
                    <div class="respostas">Number of positions per day: <span id="n"></span></div>
                    <div class="respostas">Number of sides in simultaneous operation: <span id="NL"></span></div>
                    </div>
                    <br>
                    <h5 style="background-color: #65b8a6;">Secondary Line</h5>
                    <div class="respostas">Secondary line length (m): <span id="Cls"></span></div>
                    <div class="respostas">Number of lateral positions: <span id="Npll"></span></div>
                    <div class="respostas">Number of sprinklers per lateral: <span id="Nal"></span></div>
                    <div class="respostas">Lateral Line Flow (m3/h): <span id="Qll"></span></div>
                    <div class="respostas">Lateral Line Diameter (m): <span id="Ds"></span></div>
                    <div class="respostas">Pressure at Start (mca): <span id="Pins"></span></div>
                    <br>
                    <h5 style="background-color: #65b8a6;">Main Line</h5>
                    <div class="respostas">Pump length to the last lateral line (m): <span id="Cmba"></span></div>
                    <div class="respostas">Motorpump diameter at the last lateral line (m): <span id="Dmba"></span></div>
                    <br>
                    <h5 style="background-color: #65b8a6;">Motorpump</h5>
                    <div class="respostas">Manometer Height (mca): <span id="HMT"></span></div>
                    <div id="maodeobra1" style="display:none;">
                        <div class="respostas">Flow (m3/h): <span id="QTS"></span></div>
                    </div>
                    <div id="vazaototal" style="display:none;">
                    <div class="respostas">Flow (l/s): <span id="Qt"></span></div>
                    </div>
                    <div class="respostas">Power (cv): <span id="Pot"></span></div>
                </div>

            </div>

            <div>

            </div>
        </div>
        </body>
        <script>

            function DimensionarAspersao(el){
                document.getElementById(el).style.display = "block";

                const dComerciais = [0.025, 0.032, 0.035, 0.04, 0.05, 0.063, 0.075, 0.09, 0.1, 0.11, 0.125, 0.14, 0.15, 0.16, 0.2, 0.25, 0.3, 0.35, 0.4, 0.5];
                
                // Turno de Rega
                var occ = parseFloat(document.getElementById('CC').value);
                var opmp = parseFloat(document.getElementById('PMP').value);
                var Z = parseFloat(document.getElementById('Z').value);
                var f = parseFloat(document.getElementById('f').value);
                var ADR = (occ-opmp)*Z*(f/100)*10;
                var Kc = parseFloat(document.getElementById('KC').value);
                var Eto = parseFloat(document.getElementById('ETO').value);
                var ETpc = Kc*Eto;
                var TR = ADR / ETpc;
                document.getElementById('TR').innerHTML = TR.toFixed(3);

                //Período de Irrigação
                var PI = Math.round(TR) - 1;
                document.getElementById('PI').innerHTML = PI.toFixed(3);

                // Lâmina Bruta de irrigação
                var Ea = parseFloat(document.getElementById('IR').value)/100;
                var ITN = ADR / Ea;
                document.getElementById('ITN').innerHTML = ITN.toFixed(3);

                // Número de posições da linha lateral
                var CP = parseFloat(document.getElementById('CA').value);
                var E2 = parseFloat(document.getElementById('E2').value);
                var Npll = CP / E2;
                document.getElementById('Npll').innerHTML = Npll.toFixed(3);

                // Número de aspersores por lateral
                var Nplln = 2*parseInt(Npll);
                var E1 = parseFloat(document.getElementById('E1').value);
                var Clp = (E2/2) + ((Nplln-1)*E2);
                var L = parseFloat(document.getElementById('LA').value);
                var Nal = (L/2) / E1;
                document.getElementById('Nal').innerHTML = Nal.toFixed(3);
                
                // Número de posições por dia
                var IA = parseFloat(document.getElementById('IA').value);
                var Ti = ITN / IA;
                var Nh = parseFloat(document.getElementById('Nh').value);
                var Tm = parseFloat(document.getElementById('Tm').value);
                var n = (Nh)/(Ti + Tm);
                document.getElementById('n').innerHTML = n.toFixed(3);

                // Não sei
                var Np = Nplln / (PI);
                document.getElementById('Np').innerHTML = Np.toFixed(3);
                
                // Número de laterais em funcionamento simultâneo
                var NL = Np / n;
                document.getElementById('NL').innerHTML = NL.toFixed(3);

                // Vazão da linha lateral
                var qa = parseFloat(document.getElementById('VZ').value);
                var Ql = qa*parseInt(Nal);
                document.getElementById('Qll').innerHTML = Ql.toFixed(3);

                // Vazão com troca de posições
                var QTS = Ql * NL;
                document.getElementById('QTS').innerHTML = QTS.toFixed(3);

                // Vazão total sem troca de posições
                var Qt = ( ( L*CP ) * ITN) / (PI*Nh*3600);
                document.getElementById('Qt').innerHTML = Qt.toFixed(3);

                // Vazão e perda de carga linha secundária
                var PS = parseFloat(document.getElementById('PS').value);     
                var Aa = parseFloat(document.getElementById('AA').value);
                var DZ = parseFloat(document.getElementById('Dec1').value);
                if (document.getElementById("NivelS").checked)
                {
                    var hfs = 0.2*PS;
                    var Pins = PS + ((3*hfs)/4) + Aa;
                    var Pfs = PS - 0.25*hfs + Aa;
                }
                else if (document.getElementById("AcliveS").checked)
                {
                    var hfs = 0.2*PS - DZ;
                    if (Math.sign(hfl) == -1 || Math.sign(hfl) == 0)
                    {
                        hfs = DZ;
                    }
                    var Pins = PS + ((3*hfs)/4) + Aa + 0.5*DZ;
                    var Pfs = PS - 0.25*hfs + Aa + 0.5*DZ;
                }
                else if (document.getElementById("DecliveS").checked)
                {
                    var hfs = 0.2*PS + DZ;
                    var Pins = PS + ((3*hfs)/4) + Aa - 0.5*DZ;
                    var Pfs = PS - 0.25*hfs + Aa - 0.5*DZ;
                }
                document.getElementById('Pins').innerHTML = Pins.toFixed(3);

                // Comprimento da linha secundária
                var Cls = (parseInt(Nal)-1)*E1 + E1/2;
                document.getElementById('Cls').innerHTML = Cls.toFixed(3);

                // Diâmetro da linha secundária
                var F = (1/(1.852+1))+(1/(2*parseInt(Nal)))+(Math.sqrt(0.852)/(6*Math.pow(parseInt(Nal),2)));
                var Cs = parseFloat(document.getElementById('C2').value);
                var r = (Ql/3600) / Cs;
                var r1 = 10.643 * Math.pow(r,1.852)*((Cls*F)/hfs);
                var Ds =  Math.pow(r1, 0.205);
                const Dsc = dComerciais.reduce((a, b) => {
                    return Math.abs(b - Ds) < Math.abs(a - Ds) ? b : a;
                });
                document.getElementById('Ds').innerHTML = Dsc;
                var hfsc= 10.643 * Math.pow(r, 1.852) * ( 1 / Math.pow(Dsc, 1.852) ) * Cls * F;

                // Linha principal, perda de carga e motobomba
                var CLS = parseFloat(document.getElementById('CLS').value);
                var LLP = (parseInt(Npll)-1)*E2;
                var VE = parseFloat(document.getElementById('VE').value);
                var Cp = parseFloat(document.getElementById('C1').value);
                var hs = parseFloat(document.getElementById('AS').value);
                var hr = parseFloat(document.getElementById('AR').value);
                var RM = parseFloat(document.getElementById('RM').value);
                var Fp1 = (1/(1.852+1))+(1/(2*parseInt(Nplln)))+(Math.sqrt(0.852)/(6*Math.pow(parseInt(Nplln),2)));
                var Fp2 = (1/(1.852+1))+(1/(2*parseInt(NL)))+(Math.sqrt(0.852)/(6*Math.pow(parseInt(NL),2)));
                var Cmba = LLP + CLS;
                if (document.getElementById("Sim").checked) 
                {
                    document.getElementById('maodeobra').style.display = "block";
                    document.getElementById('maodeobra1').style.display = "block";
                    var Dmba = Math.sqrt(((4*(QTS/3600))/(Math.PI*VE)));
                    const Dmbac = dComerciais.reduce((a, b) => {
                        return Math.abs(b - Dmba) < Math.abs(a - Dmba) ? b : a;
                    });
                    var hfmba = 10.643 * Math.pow(((3*(QTS/3600))/Cp),1.852)*(Cmba/Math.pow(Dmbac,4.87))*Fp2;
                    var HMT = (hfmba + Pins + hr + hs + hfsc)*1.1;
                    var Pot = ((QTS/3.6)*HMT)/(75*(RM/100));
                }
                else if (document.getElementById("Nao").checked)
                {
                    document.getElementById('vazaototal').style.display = "block";
                    var a = (4* (Qt/1000) ) / (Math.PI*VE);
                    var Dmba = Math.sqrt(a);
                    const Dmbac = dComerciais.reduce((a, b) => {
                        return Math.abs(b - Dmba) < Math.abs(a - Dmba) ? b : a;
                    });
                    var hfmba = 10.643 * Math.pow(( (3* (Qt/1000) ) / Cp ), 1.852) * ( Cmba / (Math.pow(Dmbac,4.87)) * Fp1);
                    var HMT = (hfmba + Pins + hr + hs + hfsc)*1.1;
                    var Pot = (Qt*HMT)/(75*(RM/100));
                }
                document.getElementById('Dmba').innerHTML = Dmbac;
                document.getElementById('Cmba').innerHTML = Cmba.toFixed(3);
                document.getElementById('HMT').innerHTML = HMT.toFixed(3);
                document.getElementById('Pot').innerHTML = Pot.toFixed(3);
            }
        </script>
</html>