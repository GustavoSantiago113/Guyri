<html>
    <head>
        <title>
            Guyri - Micro Aspersão
        </title>
        <link rel="stylesheet" type="text/css" href="style.css">
        <script src="functions.js"></script>
    </head>
    <header class="header">
        <img class="logo_header" src="Icones/Logotipo 2.png">
        <div class="title_header">
            <h1 style="background-color: #b5e8c3; font-size: 30px;">ARA</h1>
            <h3 style="background-color: #b5e8c3; font-size: larger;">BIOSSISTEMAS</h3>
        </div>
        <a class="return_initial" href="initial_page.html">Home</a>
    </header>
    <body>
        <div class="body_sizing">
            <div class="main_lateral_dropdown">
                <div class="lateral_dropdown">
                    <button class="lateral_dropbtn">
                        <img class="icon" src="Icones/irrigation.png">
                    </button>
                    <div class="lateral_dropdown-content">
                        <a class="link" href="Gotejamento.html">Gotejamento</a>
                        <a class="link" href="Aspersao.html">Aspersão</a>
                        <a class="link" href="Micro_Aspersao.html">Micro-Aspersão</a>
                        <a class="link" href="Pivo_Central.html">Pivô Central</a>
                    </div>
                </div>
    
                <div class="lateral_dropdown">
                    <button class="lateral_dropbtn">
                        <img class="icon" src="Icones/solar-energy.png">
                    </button>
                    <div class="lateral_dropdown-content">
                        <a class="link" href="Aquecimento_Solar.html">Aquecimento Solar</a>
                        <a class="link" href="Fotovoltaica.html">Fotovoltaica</a>
                        <a class="link" href="Eolica.html">Eólica</a>
                        <a class="link" href="Hidroeletrica.html">Hidroelétrica</a>
                    </div>
                </div>
    
                <div class="lateral_dropdown">
                    <button class="lateral_dropbtn">
                        <img class="icon" src="Icones/bacteria.png">
                    </button>
                    <div class="lateral_dropdown-content">
                        <a class="link" href="Biodigestor.html">Biodigestor</a>
                        <a class="link" href="Compostagem.html">Compostagem</a>
                    </div>
                </div>
    
                <div class="lateral_dropdown">
                    <button class="lateral_dropbtn">
                        <img class="icon" src="Icones/greenhouse.png">
                    </button>
                    <div class="lateral_dropdown-content">
                        <a class="link" href="Ventilacao_Forcada.html">Ventilação Forçada</a>
                        <a class="link" href="Ar_Condicionado.html">Ar Condicionado</a>
                        <a class="link" href="Nebulizacao.html">Nebulização</a>
                    </div>
                </div>
    
                <div class="lateral_dropdown">
                    <button class="lateral_dropbtn">
                        <img class="icon" src="Icones/dollar-currency-symbol.png">
                    </button>
                    <div class="lateral_dropdown-content">
                        <a class="link" href="Analise_Economica.html">Análise Econômica</a>
                    </div>
                </div>
            </div>

            <div class="main_section">

                <div class="calculator">

                    <ul class="nav">
                        <button class="nav_link active" id="csc_bt" onclick="openTab(event, 'csc')">Cultura, Solo e clima</button>
                        <button class="nav_link" id="area_bt" onclick="openTab(event, 'area')">Área</button>
                        <button class="nav_link" id="proj_bt" onclick="openTab(event, 'proj')">Critérios do Projeto</button>
                        <button class="nav_link" id="asp_bt" onclick="openTab(event, 'asp')">Aspersor</button>
                        <button class="nav_link" id="mdo_bt" onclick="openTab(event, 'mdo')">Mão de Obra</button>
                    </ul>

                    <div class="tab_content">

                        <div class="tab_pane" id="csc">
                            <input class="input" placeholder="Kc" type="number" step="0.0001" id="Kc">
                            <br><input class="input" placeholder="Kp" type="number" step="0.0001" id="Kp">
                            <br><input class="input" placeholder="Kr" type="number" step="0.0001" id="Kr">
                            <br><input class="input" placeholder="ECA (mm/dia)" type="number" step="0.0001" id="ECA">
                            <br><input class="input" placeholder="ETc (mm/dia)" type="number" step="0.0001" id="ETC">
                            <br><input class="input" placeholder="Profundidade do sistema radicular (cm)" type="number" step="0.0001" id="PSR">
                            <br><input class="input" placeholder="f (%)" type="number" step="0.0001" id="f">
                            <br><input class="input" placeholder="Capacidade de campo (cm3/cm3)" type="number" step="0.0001" id="CC">
                            <br><input class="input" placeholder="Ponto de murcha permanente (cm3/cm3)" type="number" step="0.0001" id="PMP">
                            <br><input class="input" placeholder="Densidade do solo (g/cm3)" type="number" step="0.0001" id="ds">
                        </div>

                        <div class="tab_pane" id="area" style="display: none;">
                            <input class="input" placeholder="Largura da área (m)" type="number" step="0.0001" id="LA">
                            <br><input class="input" placeholder="Comprimento da área (m)" type="number" step="0.0001" id="CA">
                            <br><input class="input" placeholder="Comprimento da linha de sucção à primeira linha lateral(m)" type="number" step="0.0001" id="CLS">
                            <br><input class="input" placeholder="Altura de sucção (m)" type="number" step="0.0001" id="AS">
                            <br><input class="input" placeholder="Altura de recalque positivo para aclive e negativo para declive (m)" type="number" step="0.0001" id="AR">
                        </div>

                        <div class="tab_pane" id="proj" style="display: none;">
                            <br><input class="input" placeholder="Velocidade de escoamento nas tubulações (m/s)" type="number" step="0.0001" id="VE">
                            <br><input class="input" placeholder="Coeficiente de Hazen-Williams da linha principal" type="number" step="0.0001" id="Cp">
                            <br><input class="input" placeholder="Coeficiente de Hazen-Williams na linha de derivação" type="number" step="0.0001" id="Cd">
                            <br><input class="input" placeholder="Coeficiente de Hazen-Williams na linha lateral" type="number" step="0.0001" id="Cl">
                            <h5 style="background-color: #65b8a6;">Linha lateral em:</h5>
                            <br>
                            <input type="radio" name="linhas" id="AcliveS"/><span>Aclive</span>
                            <input type="radio" name="linhas" id="DecliveS"/><span>Declive</span>
                            <input type="radio" name="linhas" id="NivelS"/><span>Nivel</span>
                            <input class="input" style="width:fit-content;" placeholder="Diferença de altura (m)" type="number" step="0.0001" id="Dec1">
                        </div>

                        <div class="tab_pane" id="asp" style="display: none;">
                            <input class="input" placeholder="Vazão (m3/h)" type="number" step="0.0001" id="VZ">
                            <br><input class="input" placeholder="Pressão de Serviço (mca)" type="number" step="0.0001" id="PS">
                            <br><input class="input" placeholder="Diâmetro molhado (m)" type="number" step="0.0001" id="DM">
                            <br><input class="input" placeholder="Número de emissores por árvore" type="number" step="0.0001" id="n">
                            <br><input class="input" placeholder="Espaçamento entre-plantas (m)" type="number" step="0.0001" id="Ep">
                            <br><input class="input" placeholder="Espaçamento entre-linhas (m)" type="number" step="0.0001" id="El">
                            <br><input class="input" placeholder="Espaçamento na mesma linha entre aspersores (m)" type="number" step="0.0001" id="Ee">
                        </div>

                        <div class="tab_pane" id="mdo" style="display: none;">
                            <input class="input" placeholder="Rendimento da Motobomba (%)" type="number" step="0.0001" id="RM">
                        </div>

                    </div>

                </div>

                <button class="result" onclick="DimensionarMicroAsp('minhaDiv');">
                    Dimensionar!
                </button>

                <div class="boxresults" id="minhaDiv" style="display: none;">
                    <center><div class="titresp">Resultados</div></center>
                    <h5 style="background-color: #65b8a6;">Manejo</h5>
                    <div class="respostas">Lâmina Máxima de Irrigação (mm): <span id="hmax"></span></div>
                    <div class="respostas">Período Máximo de Irrigação (dias): <span id="Fmax"></span></div>
                    <div class="respostas">Tempo de irrigação (h): <span id="T"></span></div>
                    <br>
                    <h5 style="background-color: #65b8a6;">Linhas laterais</h5>
                    <div class="respostas">Número total de linhas laterais: <span id="Nll"></span></div>
                    <div class="respostas">Comprimento de cada linha lateral (m): <span id="Ll"></span></div>
                    <div class="respostas">Comprimento total de linhas laterais (m): <span id="Ctll"></span></div>
                    <div class="respostas">Número de aspersores por linha lateral : <span id="Nall"></span></div>
                    <div class="respostas">Vazão de cada linha lateral (m3/h): <span id="Qll"></span></div>
                    <div class="respostas">Diâmetro da linha lateral: <span id="Dl"></span></div>
                    <div class="respostas">Número total de microaspersores: <span id="Ntma"></span></div>
                    <br>
                    <h5 style="background-color: #65b8a6;">Linhas de derivação</h5>
                    <div class="respostas">Comprimento de uma linha de derivação (m): <span id="Cmpd"></span></div>
                    <div class="respostas">Comprimento total das linhas de derivação (m): <span id="Ctd"></span></div>
                    <div class="respostas">Vazão de cada linha de derivação (m3/h): <span id="Qd"></span></div>
                    <div class="respostas">Diâmetro da linha de derivação (m): <span id="Dd"></span></div>
                    <br>
                    <h5 style="background-color: #65b8a6;">Linha principal</h5>
                    <div class="respostas">Comprimento da linha principal (m): <span id="Lp"></span></div>
                    <div class="respostas">Diâmetro da linha principal (m): <span id="Dp"></span></div>
                    <br>
                    <h5 style="background-color: #65b8a6;">Motobomba</h5>
                    <div class="respostas">Vazão (m3/h): <span id="Qp"></span></div>
                    <div class="respostas">Altura manométrica total (mca): <span id="HMT"></span></div>
                    <div class="respostas">Potência (cv): <span id="Pot"></span></div>
                    <br>
                    <button class="generate_pdf"> Gerar PDF </button>
                </div>
                
            </div>

            <div>

            </div>
        </div>
    </body>
    <script>
        function DimensionarMicroAsp(el){
            document.getElementById(el).style.display = "block";
            const dComerciais = [0.025, 0.032, 0.035, 0.04, 0.05, 0.063, 0.075, 0.09, 0.1, 0.11, 0.125, 0.14, 0.15, 0.16, 0.2, 0.25, 0.3, 0.35, 0.4, 0.5];

            //Cálculo da evapotranspiração
            var ECA = parseFloat(document.getElementById('ECA').value);
            var Kp = parseFloat(document.getElementById('Kp').value);
            var ETo = ECA * Kp; //Evapotranspiração de referência
            var Kc = parseFloat(document.getElementById('Kc').value);
            var Etm = Kc * ETo; //Evapotranspiração máxima
            var Etg = parseFloat(document.getElementById('Kr').value); //Evapotranspiração reduzida para irrigação localizada

            //Cálculo do diâmetro molhado
            var n = parseFloat(document.getElementById('n').value);
            var D = parseFloat(document.getElementById('DM').value);
            var AM = ( Math.PI * Math.pow(D,2) ) / 4 //Área molhada
            var Ep = parseFloat(document.getElementById('Ep').value);
            var El = parseFloat(document.getElementById('El').value);
            var Ate = Ep * El; //Área explorada
            var Pam =  (n*AM) / Ate; //Porcentagem de área molhada

            //Lâmina máxima de Irrigação
            var CC = parseFloat(document.getElementById('CC').value);
            var PMP = parseFloat(document.getElementById('PMP').value);
            var ds = parseFloat(document.getElementById('ds').value);
            var Z = parseFloat(document.getElementById('PSR').value);
            var f = parseFloat(document.getElementById('f').value);
            var hmax = (CC - PMP) * ds * Z * (f/100) * Pam; //Lâmina máxima de irrigação
            document.getElementById('hmax').innerHTML = hmax.toFixed(3);

            //Lâmina real de irrigação
            var Fmax = hmax / Etg; //Período máximo de irrigação
            document.getElementById('Fmax').innerHTML = Fmax.toFixed(3);

            //Tempo de Irrigação
            var q = parseFloat(document.getElementById('VZ').value);
            var Ee = parseFloat(document.getElementById('Ee').value);
            var T = ( hmax * Ee * El) / ( n * q * 1000);
            document.getElementById('T').innerHTML = T.toFixed(3);

            //Dimensionamento da linha lateral
            var L = parseFloat(document.getElementById('LA').value);
            var Ll = L / 8; //Tamanho de cada linha lateral
            var C = parseFloat(document.getElementById('CA').value);
            var Cl = C;
            document.getElementById('Ll').innerHTML = Ll.toFixed(3);
            var Ntll = (( Cl - (El/2) ) / El) * 2 * 4; //Número total de linhas laterais
            document.getElementById('Nll').innerHTML = Ntll.toFixed(3);
            var Ctll = Ntll * Ll; //Comprimento total das linhas laterais
            document.getElementById('Ctll').innerHTML = Ctll.toFixed(3);
            var Nall = ( Ll - (Ep/2) ) / Ep; //Número de aspersores da linha lateral
            document.getElementById('Nall').innerHTML = Nall.toFixed(3);
            var Ntma = Math.round(Ntll) * Math.round(Nall); //Número total de aspersores
            document.getElementById('Ntma').innerHTML = Ntma.toFixed(3);
            var PS = parseFloat(document.getElementById('PS').value);
            var DZl = parseFloat(document.getElementById('Decl').value);
            if (document.getElementById("Nivell").checked)
            {
                var hfl = 0.6*PS;
                var Pins = PS + ((3*hfs)/4);
                var Pfs = PS - 0.25*hfs;
            }
            else if (document.getElementById("Aclivel").checked)
            {
                var hfl = 0.6*PS - DZl;
                if (Math.sign(hfl) == -1 || Math.sign(hfl) == 0)
                {
                    hfl = DZ;
                }
                var Pins = PS + ((3*hfl)/4)+ 0.5*DZl;
                var Pfs = PS - 0.25*hfl + 0.5*DZl;
            }
            else if (document.getElementById("Declivel").checked)
            {
                var hfl = 0.6*PS + DZl;
                var Pins = PS + ((3*hfl)/4) - 0.5*DZl;
                var Pfs = PS - 0.25*hfl- 0.5*DZl;
            }
            var Fl = (1/(2.852))+(1/(2*parseInt(Nall)))+(Math.sqrt(0.852)/(6*Math.pow(parseInt(Nall),2))); //Calculo do F da linha lateral
            var Qll = q * Math.round(Nall); //Calculo da vazão total de uma linha lateral
            document.getElementById('Qll').innerHTML = Qll.toFixed(3);
            var Cll = parseFloat(document.getElementById('Cl').value);
            var r = (Qll/3600) / Cll;
            var r1 = 10.643 * Math.pow(r,1.852) * ( Cll / hfl) *Fl;
            var Dl =  Math.pow(r1, 0.205);
            const Dlc = dComerciais.reduce((a, b) => {
                        return Math.abs(b - Dl) < Math.abs(a - Dl) ? b : a;
            });
            document.getElementById('Dl').innerHTML = Dlc;
            // Correção da perda de carga da linha lateral

            //Dimensionamento da linha de derivação
            var Cd = C - (El/2); //Comprimento de uma linha de derivação
            var Ctd = Cd * 4 //Comprimento total das linhas de derivação
            document.getElementById('Cmpd').innerHTML = Cd.toFixed(3);
            document.getElementById('Ctd').innerHTML = Ctd.toFixed(3);
            var Nsd = ( ( ( Cl - (El/2) ) / El ) * 2 ); //Número de saídas de uma linha de derivação
            var Qd =  Nsd * Qll;
            document.getElementById('Qd').innerHTML = Qd.toFixed(3);
            var VE = parseFloat(document.getElementById('VE').value);
            var Dd = Math.sqrt(((4*(Qd/3600))/(Math.PI*VE)));
            const Ddc = dComerciais.reduce((a, b) => {
                        return Math.abs(b - Dd) < Math.abs(a - Dd) ? b : a;
            });
            document.getElementById('Dd').innerHTML = Ddc;
            var Cld = parseFloat(document.getElementById('Cd').value);
            var Fd = (1/(2.852))+(1/(2*parseInt(Nsd)))+(Math.sqrt(0.852)/(6*Math.pow(parseInt(Nsd),2))); //Calculo do F da linha de derivação
            var hd = 10.643 * Math.pow(((3*(Qd/3600))/Cld),1.852)*(Cd/Math.pow(Ddc,4.87))*Fd; //Perda de carga da linha de derivação

            //Dimensionamento da linha principal
            var Lp = L - ( 2 * Ll); //Largura da linha principal
            document.getElementById('Lp').innerHTML = Lp.toFixed(3);
            var Qp = Ntma * q;
            var Dp = Math.sqrt(((4*(Qp/3600))/(Math.PI*VE)));
            const Dpc = dComerciais.reduce((a, b) => {
                        return Math.abs(b - Dp) < Math.abs(a - Dp) ? b : a;
            });
            document.getElementById('Dp').innerHTML = Dp.toFixed(3);
            var Cp = parseFloat(document.getElementById('Cp').value);
            var CLS = parseFloat(document.getElementById('CLS').value);
            var Fp = (1/(2.852))+(1/(2*4))+(Math.sqrt(0.852)/(6*Math.pow(4,2)));
            var hp = 10.643 * Math.pow(((3*(Qp/3600))/Cp),1.852)*((Lp+CLS)/Math.pow(Dpc,4.87))*Fp;

            //Dimensionamento da motobomba
            var hs = parseFloat(document.getElementById('AS').value);
            var hr = parseFloat(document.getElementById('AR').value);
            var HMT = (hd + hp + hfl + Pins + hr + hs)*1.1; //Altura manométrica total
            document.getElementById('Qp').innerHTML = Qp.toFixed(3);
            document.getElementById('HMT').innerHTML = HMT.toFixed(3);
            var RM = parseFloat(document.getElementById('RM').value);
            var Pot = ( ( Qp / 3.6 ) * HMT ) / ( 75 * ( RM / 100 ) ); //Potência da motobomba
            document.getElementById('Pot').innerHTML = Pot.toFixed(3);
        }
    </script>
</html>